{"ast":null,"code":"import _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/home/vadim/Documents/amz/client/components/LoginPage.js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport axios from \"axios\";\nimport Router from \"next/router\";\nimport Link from \"next/link\";\n\nclass LoginPage extends React.Component {\n  constructor() {\n    super();\n\n    _defineProperty(this, \"onSubmitHandler\", async e => {\n      e.preventDefault();\n\n      try {\n        const res = await axios({\n          method: \"POST\",\n          url: \"https://amzreviewserver.herokuapp.com/api/v1/users/login\",\n          data: {\n            email: this.state.email,\n            password: this.state.password\n          }\n        });\n        document.cookie = `jwt=${res.data.token}`;\n\n        if (res.data.status === \"success\") {\n          window.setTimeout(() => {\n            Router.push(`/me`);\n          }, 500);\n        }\n      } catch (err) {\n        alert(err.response.data.message);\n      }\n    });\n\n    this.state = {\n      email: \"\",\n      password: \"\"\n    };\n  }\n\n  render() {\n    return __jsx(\"main\", {\n      className: \"main\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 41\n      },\n      __self: this\n    }, __jsx(\"div\", {\n      className: \"login-form\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 42\n      },\n      __self: this\n    }, __jsx(\"h2\", {\n      className: \"heading-secondary ma-bt-lg\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 43\n      },\n      __self: this\n    }, \"Log into your account\"), __jsx(\"form\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 44\n      },\n      __self: this\n    }, __jsx(\"div\", {\n      className: \"form__group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 45\n      },\n      __self: this\n    }, __jsx(\"label\", {\n      className: \"form__label\",\n      htmlFor: \"email\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 46\n      },\n      __self: this\n    }, \"Email address\"), __jsx(\"input\", {\n      onChange: e => this.setState({\n        email: e.target.value\n      }),\n      className: \"form__input\",\n      id: \"email\",\n      type: \"email\",\n      placeholder: \"you@example.com\",\n      required: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49\n      },\n      __self: this\n    })), __jsx(\"div\", {\n      className: \"form__group ma-bt-md\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58\n      },\n      __self: this\n    }, __jsx(\"label\", {\n      className: \"form__label\",\n      htmlFor: \"password\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59\n      },\n      __self: this\n    }, \"Password\"), __jsx(\"input\", {\n      onChange: e => this.setState({\n        password: e.target.value\n      }),\n      className: \"form__input\",\n      id: \"password\",\n      type: \"password\",\n      placeholder: \"\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\",\n      required: true,\n      minLength: \"8\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62\n      },\n      __self: this\n    })), __jsx(\"div\", {\n      className: \"form__group space-between\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72\n      },\n      __self: this\n    }, __jsx(\"button\", {\n      onClick: this.onSubmitHandler,\n      className: \"btn btn--primary\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }, \"Login\"), __jsx(Link, {\n      href: \"/forgotPassword\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    }, __jsx(\"a\", {\n      className: \"text-link\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    }, \"Forgot my password\"))))));\n  }\n\n}\n\nexport default LoginPage;","map":{"version":3,"sources":["/home/vadim/Documents/amz/client/components/LoginPage.js"],"names":["axios","Router","Link","LoginPage","React","Component","constructor","e","preventDefault","res","method","url","data","email","state","password","document","cookie","token","status","window","setTimeout","push","err","alert","response","message","render","setState","target","value","onSubmitHandler"],"mappings":"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","sourcesContent":["import axios from \"axios\";\nimport Router from \"next/router\";\nimport Link from \"next/link\";\n\nclass LoginPage extends React.Component {\n  constructor() {\n    super();\n\n    this.state = {\n      email: \"\",\n      password: \"\"\n    };\n  }\n\n  onSubmitHandler = async e => {\n    e.preventDefault();\n    try {\n      const res = await axios({\n        method: \"POST\",\n        url: \"https://amzreviewserver.herokuapp.com/api/v1/users/login\",\n        data: {\n          email: this.state.email,\n          password: this.state.password\n        }\n      });\n\n      document.cookie = `jwt=${res.data.token}`;\n\n      if (res.data.status === \"success\") {\n        window.setTimeout(() => {\n          Router.push(`/me`);\n        }, 500);\n      }\n    } catch (err) {\n      alert(err.response.data.message);\n    }\n  };\n\n  render() {\n    return (\n      <main className=\"main\">\n        <div className=\"login-form\">\n          <h2 className=\"heading-secondary ma-bt-lg\">Log into your account</h2>\n          <form>\n            <div className=\"form__group\">\n              <label className=\"form__label\" htmlFor=\"email\">\n                Email address\n              </label>\n              <input\n                onChange={e => this.setState({ email: e.target.value })}\n                className=\"form__input\"\n                id=\"email\"\n                type=\"email\"\n                placeholder=\"you@example.com\"\n                required\n              />\n            </div>\n            <div className=\"form__group ma-bt-md\">\n              <label className=\"form__label\" htmlFor=\"password\">\n                Password\n              </label>\n              <input\n                onChange={e => this.setState({ password: e.target.value })}\n                className=\"form__input\"\n                id=\"password\"\n                type=\"password\"\n                placeholder=\"••••••••\"\n                required\n                minLength=\"8\"\n              />\n            </div>\n            <div className=\"form__group space-between\">\n              <button\n                onClick={this.onSubmitHandler}\n                className=\"btn btn--primary\"\n              >\n                Login\n              </button>\n              <Link href=\"/forgotPassword\">\n                <a className=\"text-link\">Forgot my password</a>\n              </Link>\n            </div>\n          </form>\n        </div>\n      </main>\n    );\n  }\n}\n\nexport default LoginPage;\n"]},"metadata":{},"sourceType":"module"}