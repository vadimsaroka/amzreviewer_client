{"ast":null,"code":"import _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/home/vadim/Documents/amz/client/components/Header.js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport Link from \"next/link\";\nimport axios from \"axios\";\nimport Router from \"next/router\";\nimport \"./Header.scss\";\n\nclass Header extends React.Component {\n  constructor() {\n    super();\n\n    _defineProperty(this, \"getUser\", async () => {\n      // Get current user\n      if (this.state.jwt) {\n        try {\n          const res = await axios({\n            method: \"GET\",\n            url: \"https://amzreviewserver.herokuapp.com/api/v1/users/me\",\n            headers: {\n              Authorization: \"Bearer \" + this.state.jwt\n            }\n          });\n          this.setState({\n            userName: res.data.data.data.name.split(\" \")[0],\n            userPhoto: res.data.data.data.photo\n          });\n        } catch (err) {\n          alert(err.response.data.message);\n        }\n      }\n    });\n\n    _defineProperty(this, \"logOut\", async () => {\n      document.cookie = \"jwt=logout; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/\";\n      window.setTimeout(() => {\n        Router.push(`/`);\n      }, 500);\n    });\n\n    this.state = {\n      jwt: false,\n      userName: \"\",\n      userPhoto: \"\"\n    };\n  }\n\n  async componentDidMount() {\n    // Verify user\n    try {\n      const res = await axios({\n        method: \"GET\",\n        url: `https://amzreviewserver.herokuapp.com/api/v1/users/ferify/${document.cookie.split(\"=\")[1]}`\n      });\n\n      if (res.data.status === \"success\") {\n        this.setState({\n          jwt: document.cookie.split(\"=\")[1]\n        });\n      }\n    } catch (err) {\n      // alert(err.response.data.message);\n      console.log(err);\n    }\n\n    this.getUser();\n  }\n\n  render() {\n    if (this.state.jwt) {\n      return __jsx(\"header\", {\n        className: \"header\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      }, __jsx(Link, {\n        href: \"/\",\n        as: \"/\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      }, __jsx(\"a\", {\n        className: \"header__nav--link\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      }, __jsx(\"div\", {\n        className: \"header__logo\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }, \"Amazon Reviewer\", \" \", __jsx(\"img\", {\n        alt: \"logo\",\n        className: \"header__image\",\n        src: \"static/logo.png\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      })))), __jsx(\"nav\", {\n        className: \"header__nav\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      }, __jsx(\"a\", {\n        onClick: this.logOut,\n        className: \"header__nav--link\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      }, \"Log out\"), __jsx(Link, {\n        href: \"/me\",\n        as: \"/me\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }, __jsx(\"a\", {\n        className: \"header__nav--link\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }, __jsx(\"img\", {\n        className: \"header__img\",\n        alt: \"user photo\",\n        src: this.state.userPhoto,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }), this.state.userName))));\n    } else {\n      return __jsx(\"header\", {\n        className: \"header\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }, __jsx(Link, {\n        href: \"/\",\n        as: \"/\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }, __jsx(\"a\", {\n        className: \"header__nav--link\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      }, __jsx(\"div\", {\n        className: \"header__logo\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      }, \"Amazon Reviewer\", \" \", __jsx(\"img\", {\n        alt: \"logo\",\n        className: \"header__image\",\n        src: \"static/logo.png\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      })))), __jsx(\"nav\", {\n        className: \"header__nav\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }, __jsx(Link, {\n        href: \"/login\",\n        as: \"/login\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      }, __jsx(\"a\", {\n        className: \"header__nav--link\",\n        style: {\n          \"marginRight\": \"3rem\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }, \"Sign in\")), __jsx(Link, {\n        href: \"/signup\",\n        as: \"signup\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      }, __jsx(\"a\", {\n        className: \"header__nav--link\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      }, \"Sign up\"))));\n    }\n  }\n\n}\n\nexport default Header;","map":{"version":3,"sources":["/home/vadim/Documents/amz/client/components/Header.js"],"names":["Link","axios","Router","Header","React","Component","constructor","state","jwt","res","method","url","headers","Authorization","setState","userName","data","name","split","userPhoto","photo","err","alert","response","message","document","cookie","window","setTimeout","push","componentDidMount","status","console","log","getUser","render","logOut"],"mappings":"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","sourcesContent":["import Link from \"next/link\";\nimport axios from \"axios\";\nimport Router from \"next/router\";\n\nimport \"./Header.scss\";\n\nclass Header extends React.Component {\n  constructor() {\n    super();\n\n    this.state = {\n      jwt: false,\n      userName: \"\",\n      userPhoto: \"\"\n    };\n  }\n\n  async componentDidMount() {\n    // Verify user\n    try {\n      const res = await axios({\n        method: \"GET\",\n        url: `https://amzreviewserver.herokuapp.com/api/v1/users/ferify/${\n          document.cookie.split(\"=\")[1]\n        }`\n      });\n\n      if (res.data.status === \"success\") {\n        this.setState({ jwt: document.cookie.split(\"=\")[1] });\n      }\n    } catch (err) {\n      // alert(err.response.data.message);\n      console.log(err);\n    }\n\n    this.getUser();\n  }\n\n  getUser = async () => {\n    // Get current user\n    if (this.state.jwt) {\n      try {\n        const res = await axios({\n          method: \"GET\",\n          url: \"https://amzreviewserver.herokuapp.com/api/v1/users/me\",\n          headers: { Authorization: \"Bearer \" + this.state.jwt }\n        });\n\n        this.setState({\n          userName: res.data.data.data.name.split(\" \")[0],\n          userPhoto: res.data.data.data.photo\n        });\n      } catch (err) {\n        alert(err.response.data.message);\n      }\n    }\n  };\n\n  logOut = async () => {\n    document.cookie =\n      \"jwt=logout; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/\";\n\n    window.setTimeout(() => {\n      Router.push(`/`);\n    }, 500);\n  };\n\n  render() {\n    if (this.state.jwt) {\n      return (\n        <header className=\"header\">\n          <Link href=\"/\" as=\"/\">\n            <a className=\"header__nav--link\">\n              <div className=\"header__logo\">\n                Amazon Reviewer{\" \"}\n                <img\n                  alt=\"logo\"\n                  className=\"header__image\"\n                  src=\"static/logo.png\"\n                />\n              </div>\n            </a>\n          </Link>\n          <nav className=\"header__nav\">\n            <a onClick={this.logOut} className=\"header__nav--link\">\n              Log out\n            </a>\n            <Link href=\"/me\" as=\"/me\">\n              <a className=\"header__nav--link\">\n                <img\n                  className=\"header__img\"\n                  alt=\"user photo\"\n                  src={this.state.userPhoto}\n                />\n                {this.state.userName}\n              </a>\n            </Link>\n          </nav>\n        </header>\n      );\n    } else {\n      return (\n        <header className=\"header\">\n          <Link href=\"/\" as=\"/\">\n            <a className=\"header__nav--link\">\n              <div className=\"header__logo\">\n                Amazon Reviewer{\" \"}\n                <img\n                  alt=\"logo\"\n                  className=\"header__image\"\n                  src=\"static/logo.png\"\n                />\n              </div>\n            </a>\n          </Link>\n          <nav className=\"header__nav\">\n            <Link href=\"/login\" as=\"/login\">\n              <a className=\"header__nav--link\" style={{\"marginRight\": \"3rem\"}}>Sign in</a>\n            </Link>\n            <Link href=\"/signup\" as=\"signup\">\n              <a className=\"header__nav--link\">Sign up</a>\n            </Link>\n          </nav>\n        </header>\n      );\n    }\n  }\n}\n\nexport default Header;\n"]},"metadata":{},"sourceType":"module"}