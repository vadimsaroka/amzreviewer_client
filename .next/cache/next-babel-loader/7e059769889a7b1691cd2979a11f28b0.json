{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/home/vadim/Documents/amz/client/components/SignUpPage.js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport axios from \"axios\";\nimport Router from \"next/router\";\nimport Link from \"next/link\";\n\nvar SignUpPage =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(SignUpPage, _React$Component);\n\n  function SignUpPage() {\n    var _this;\n\n    _classCallCheck(this, SignUpPage);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(SignUpPage).call(this));\n\n    _defineProperty(_assertThisInitialized(_this), \"onSubmit\",\n    /*#__PURE__*/\n    function () {\n      var _ref = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(e) {\n        var res;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                e.preventDefault();\n                _context.prev = 1;\n                _context.next = 4;\n                return axios({\n                  method: \"POST\",\n                  url: \"https://amzreviewserver.herokuapp.com/api/v1/users/signup\",\n                  data: {\n                    name: _this.state.name,\n                    email: _this.state.email,\n                    password: _this.state.password,\n                    passwordConfirm: _this.state.passwordConfirm\n                  }\n                });\n\n              case 4:\n                res = _context.sent;\n                document.cookie = \"jwt=\".concat(res.data.token);\n\n                if (res.data.status === \"success\") {\n                  window.setTimeout(function () {\n                    Router.push(\"/me\");\n                  }, 500);\n                }\n\n                _context.next = 12;\n                break;\n\n              case 9:\n                _context.prev = 9;\n                _context.t0 = _context[\"catch\"](1);\n                alert(_context.t0.response.data.message);\n\n              case 12:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[1, 9]]);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }());\n\n    _this.state = {\n      name: \"\",\n      email: \"\",\n      password: \"\",\n      passwordConfirm: \"\"\n    };\n    return _this;\n  }\n\n  _createClass(SignUpPage, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return __jsx(\"main\", {\n        className: \"main\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 46\n        },\n        __self: this\n      }, __jsx(\"div\", {\n        className: \"login-form\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 47\n        },\n        __self: this\n      }, __jsx(\"h2\", {\n        className: \"heading-secondary ma-bt-lg\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 48\n        },\n        __self: this\n      }, \"Create your account!\"), __jsx(\"form\", {\n        onSubmit: this.onSubmit,\n        className: \"form form--signup\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 49\n        },\n        __self: this\n      }, __jsx(\"div\", {\n        className: \"form__group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 50\n        },\n        __self: this\n      }, __jsx(\"label\", {\n        className: \"form__label\",\n        htmlFor: \"name\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 51\n        },\n        __self: this\n      }, \"Your name\"), __jsx(\"input\", {\n        onChange: function onChange(e) {\n          return _this2.setState({\n            name: e.target.value\n          });\n        },\n        className: \"form__input\",\n        id: \"name\",\n        type: \"text\",\n        required: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 54\n        },\n        __self: this\n      })), __jsx(\"div\", {\n        className: \"form__group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62\n        },\n        __self: this\n      }, __jsx(\"label\", {\n        className: \"form__label\",\n        htmlFor: \"email\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63\n        },\n        __self: this\n      }, \"Email address\"), __jsx(\"input\", {\n        onChange: function onChange(e) {\n          return _this2.setState({\n            email: e.target.value\n          });\n        },\n        className: \"form__input\",\n        id: \"email\",\n        type: \"email\",\n        placeholder: \"you@example.com\",\n        required: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66\n        },\n        __self: this\n      })), __jsx(\"div\", {\n        className: \"form__group ma-bt-md\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }, __jsx(\"label\", {\n        className: \"form__label\",\n        htmlFor: \"password\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }, \"Password\"), __jsx(\"input\", {\n        onChange: function onChange(e) {\n          return _this2.setState({\n            password: e.target.value\n          });\n        },\n        className: \"form__input\",\n        id: \"password\",\n        type: \"password\",\n        placeholder: \"\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\",\n        required: true,\n        minLength: \"8\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      })), __jsx(\"div\", {\n        className: \"form__group ma-bt-md\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }, __jsx(\"label\", {\n        className: \"form__label\",\n        htmlFor: \"passwordConfirm\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }, \"Confirm password\"), __jsx(\"input\", {\n        onChange: function onChange(e) {\n          return _this2.setState({\n            passwordConfirm: e.target.value\n          });\n        },\n        className: \"form__input\",\n        id: \"passwordConfirm\",\n        type: \"password\",\n        placeholder: \"\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\",\n        required: true,\n        minLength: \"8\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93\n        },\n        __self: this\n      })), __jsx(\"div\", {\n        className: \"form__group space-between\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      }, __jsx(\"button\", {\n        className: \"btn btn--primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      }, \"Sign up\"), __jsx(Link, {\n        href: \"/login\",\n        as: \"/login\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }, __jsx(\"a\", {\n        className: \"text-link\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      }, \"Already have an account? Sign in\"))))));\n    }\n  }]);\n\n  return SignUpPage;\n}(React.Component);\n\nexport default SignUpPage;","map":{"version":3,"sources":["/home/vadim/Documents/amz/client/components/SignUpPage.js"],"names":["axios","Router","Link","SignUpPage","e","preventDefault","method","url","data","name","state","email","password","passwordConfirm","res","document","cookie","token","status","window","setTimeout","push","alert","response","message","onSubmit","setState","target","value","React","Component"],"mappings":"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","sourcesContent":["import axios from \"axios\";\nimport Router from \"next/router\";\nimport Link from \"next/link\";\n\nclass SignUpPage extends React.Component {\n  constructor() {\n    super();\n\n    this.state = {\n      name: \"\",\n      email: \"\",\n      password: \"\",\n      passwordConfirm: \"\"\n    };\n  }\n\n  onSubmit = async e => {\n    e.preventDefault();\n\n    try {\n      const res = await axios({\n        method: \"POST\",\n        url: \"https://amzreviewserver.herokuapp.com/api/v1/users/signup\",\n        data: {\n          name: this.state.name,\n          email: this.state.email,\n          password: this.state.password,\n          passwordConfirm: this.state.passwordConfirm\n        }\n      });\n\n      document.cookie = `jwt=${res.data.token}`;\n\n      if (res.data.status === \"success\") {\n        window.setTimeout(() => {\n          Router.push(`/me`);\n        }, 500);\n      }\n    } catch (err) {\n      alert(err.response.data.message);\n    }\n  };\n\n  render() {\n    return (\n      <main className=\"main\">\n        <div className=\"login-form\">\n          <h2 className=\"heading-secondary ma-bt-lg\">Create your account!</h2>\n          <form onSubmit={this.onSubmit} className=\"form form--signup\">\n            <div className=\"form__group\">\n              <label className=\"form__label\" htmlFor=\"name\">\n                Your name\n              </label>\n              <input\n                onChange={e => this.setState({ name: e.target.value })}\n                className=\"form__input\"\n                id=\"name\"\n                type=\"text\"\n                required\n              />\n            </div>\n            <div className=\"form__group\">\n              <label className=\"form__label\" htmlFor=\"email\">\n                Email address\n              </label>\n              <input\n                onChange={e => this.setState({ email: e.target.value })}\n                className=\"form__input\"\n                id=\"email\"\n                type=\"email\"\n                placeholder=\"you@example.com\"\n                required\n              />\n            </div>\n            <div className=\"form__group ma-bt-md\">\n              <label className=\"form__label\" htmlFor=\"password\">\n                Password\n              </label>\n              <input\n                onChange={e => this.setState({ password: e.target.value })}\n                className=\"form__input\"\n                id=\"password\"\n                type=\"password\"\n                placeholder=\"••••••••\"\n                required\n                minLength=\"8\"\n              />\n            </div>\n            <div className=\"form__group ma-bt-md\">\n              <label className=\"form__label\" htmlFor=\"passwordConfirm\">\n                Confirm password\n              </label>\n              <input\n                onChange={e =>\n                  this.setState({ passwordConfirm: e.target.value })\n                }\n                className=\"form__input\"\n                id=\"passwordConfirm\"\n                type=\"password\"\n                placeholder=\"••••••••\"\n                required\n                minLength=\"8\"\n              />\n            </div>\n            <div className=\"form__group space-between\">\n              <button className=\"btn btn--primary\">Sign up</button>\n              <Link href=\"/login\" as=\"/login\">\n                <a className=\"text-link\">Already have an account? Sign in</a>\n              </Link>\n            </div>\n          </form>\n        </div>\n      </main>\n    );\n  }\n}\n\nexport default SignUpPage;\n"]},"metadata":{},"sourceType":"module"}