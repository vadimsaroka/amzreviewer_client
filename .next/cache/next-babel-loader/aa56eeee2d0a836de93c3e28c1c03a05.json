{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/home/vadim/Documents/amz/client/components/LoginPage.js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport axios from \"axios\";\nimport Router from \"next/router\";\nimport Link from \"next/link\";\n\nvar LoginPage =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(LoginPage, _React$Component);\n\n  function LoginPage() {\n    var _this;\n\n    _classCallCheck(this, LoginPage);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(LoginPage).call(this));\n\n    _defineProperty(_assertThisInitialized(_this), \"onSubmitHandler\",\n    /*#__PURE__*/\n    function () {\n      var _ref = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(e) {\n        var res;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                e.preventDefault();\n                _context.prev = 1;\n                _context.next = 4;\n                return axios({\n                  method: \"POST\",\n                  url: \"https://amzreviewserver.herokuapp.com/api/v1/users/login\",\n                  data: {\n                    email: _this.state.email,\n                    password: _this.state.password\n                  }\n                });\n\n              case 4:\n                res = _context.sent;\n                document.cookie = \"jwt=\".concat(res.data.token);\n\n                if (res.data.status === \"success\") {\n                  window.setTimeout(function () {\n                    Router.push(\"/me\");\n                  }, 500);\n                }\n\n                _context.next = 12;\n                break;\n\n              case 9:\n                _context.prev = 9;\n                _context.t0 = _context[\"catch\"](1);\n                alert(_context.t0.response.data.message);\n\n              case 12:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[1, 9]]);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }());\n\n    _this.state = {\n      email: \"\",\n      password: \"\"\n    };\n    return _this;\n  }\n\n  _createClass(LoginPage, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return __jsx(\"main\", {\n        className: \"main\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 41\n        },\n        __self: this\n      }, __jsx(\"div\", {\n        className: \"login-form\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 42\n        },\n        __self: this\n      }, __jsx(\"h2\", {\n        className: \"heading-secondary ma-bt-lg\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 43\n        },\n        __self: this\n      }, \"Log into your account\"), __jsx(\"form\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 44\n        },\n        __self: this\n      }, __jsx(\"div\", {\n        className: \"form__group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 45\n        },\n        __self: this\n      }, __jsx(\"label\", {\n        className: \"form__label\",\n        htmlFor: \"email\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 46\n        },\n        __self: this\n      }, \"Email address\"), __jsx(\"input\", {\n        onChange: function onChange(e) {\n          return _this2.setState({\n            email: e.target.value\n          });\n        },\n        className: \"form__input\",\n        id: \"email\",\n        type: \"email\",\n        placeholder: \"you@example.com\",\n        required: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 49\n        },\n        __self: this\n      })), __jsx(\"div\", {\n        className: \"form__group ma-bt-md\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58\n        },\n        __self: this\n      }, __jsx(\"label\", {\n        className: \"form__label\",\n        htmlFor: \"password\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59\n        },\n        __self: this\n      }, \"Password\"), __jsx(\"input\", {\n        onChange: function onChange(e) {\n          return _this2.setState({\n            password: e.target.value\n          });\n        },\n        className: \"form__input\",\n        id: \"password\",\n        type: \"password\",\n        placeholder: \"\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\",\n        required: true,\n        minLength: \"8\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62\n        },\n        __self: this\n      })), __jsx(\"div\", {\n        className: \"form__group space-between\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      }, __jsx(\"button\", {\n        onClick: this.onSubmitHandler,\n        className: \"btn btn--primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      }, \"Login\"), __jsx(Link, {\n        href: \"/forgotPassword\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }, __jsx(\"a\", {\n        className: \"text-link\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }, \"Forgot my password\"))))));\n    }\n  }]);\n\n  return LoginPage;\n}(React.Component);\n\nexport default LoginPage;","map":{"version":3,"sources":["/home/vadim/Documents/amz/client/components/LoginPage.js"],"names":["axios","Router","Link","LoginPage","e","preventDefault","method","url","data","email","state","password","res","document","cookie","token","status","window","setTimeout","push","alert","response","message","setState","target","value","onSubmitHandler","React","Component"],"mappings":"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","sourcesContent":["import axios from \"axios\";\nimport Router from \"next/router\";\nimport Link from \"next/link\";\n\nclass LoginPage extends React.Component {\n  constructor() {\n    super();\n\n    this.state = {\n      email: \"\",\n      password: \"\"\n    };\n  }\n\n  onSubmitHandler = async e => {\n    e.preventDefault();\n    try {\n      const res = await axios({\n        method: \"POST\",\n        url: \"https://amzreviewserver.herokuapp.com/api/v1/users/login\",\n        data: {\n          email: this.state.email,\n          password: this.state.password\n        }\n      });\n\n      document.cookie = `jwt=${res.data.token}`;\n\n      if (res.data.status === \"success\") {\n        window.setTimeout(() => {\n          Router.push(`/me`);\n        }, 500);\n      }\n    } catch (err) {\n      alert(err.response.data.message);\n    }\n  };\n\n  render() {\n    return (\n      <main className=\"main\">\n        <div className=\"login-form\">\n          <h2 className=\"heading-secondary ma-bt-lg\">Log into your account</h2>\n          <form>\n            <div className=\"form__group\">\n              <label className=\"form__label\" htmlFor=\"email\">\n                Email address\n              </label>\n              <input\n                onChange={e => this.setState({ email: e.target.value })}\n                className=\"form__input\"\n                id=\"email\"\n                type=\"email\"\n                placeholder=\"you@example.com\"\n                required\n              />\n            </div>\n            <div className=\"form__group ma-bt-md\">\n              <label className=\"form__label\" htmlFor=\"password\">\n                Password\n              </label>\n              <input\n                onChange={e => this.setState({ password: e.target.value })}\n                className=\"form__input\"\n                id=\"password\"\n                type=\"password\"\n                placeholder=\"••••••••\"\n                required\n                minLength=\"8\"\n              />\n            </div>\n            <div className=\"form__group space-between\">\n              <button\n                onClick={this.onSubmitHandler}\n                className=\"btn btn--primary\"\n              >\n                Login\n              </button>\n              <Link href=\"/forgotPassword\">\n                <a className=\"text-link\">Forgot my password</a>\n              </Link>\n            </div>\n          </form>\n        </div>\n      </main>\n    );\n  }\n}\n\nexport default LoginPage;\n"]},"metadata":{},"sourceType":"module"}